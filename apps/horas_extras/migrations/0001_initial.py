# Generated by Django 5.2.9 on 2026-01-22 00:43

import django.core.validators
import django.db.models.deletion
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='TipoTurno',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(choices=[('manana', 'Turno Mañana'), ('tarde', 'Turno Tarde'), ('noche', 'Turno Noche'), ('apoyo', 'Turno Apoyo'), ('descanso', 'Día Descanso')], max_length=20, unique=True)),
                ('descripcion', models.CharField(max_length=100)),
                ('codigo', models.CharField(help_text='Código del turno (M, T, N, A, D)', max_length=5, unique=True)),
                ('hora_inicio_martes', models.TimeField(blank=True, null=True)),
                ('hora_fin_martes', models.TimeField(blank=True, null=True)),
                ('horas_martes', models.DecimalField(decimal_places=2, default=Decimal('7.00'), max_digits=4)),
                ('hora_inicio_miercoles', models.TimeField(blank=True, null=True)),
                ('hora_fin_miercoles', models.TimeField(blank=True, null=True)),
                ('horas_miercoles', models.DecimalField(decimal_places=2, default=Decimal('7.00'), max_digits=4)),
                ('hora_inicio_jueves', models.TimeField(blank=True, null=True)),
                ('hora_fin_jueves', models.TimeField(blank=True, null=True)),
                ('horas_jueves', models.DecimalField(decimal_places=2, default=Decimal('7.00'), max_digits=4)),
                ('hora_inicio_viernes', models.TimeField(blank=True, null=True)),
                ('hora_fin_viernes', models.TimeField(blank=True, null=True)),
                ('horas_viernes', models.DecimalField(decimal_places=2, default=Decimal('7.00'), max_digits=4)),
                ('hora_inicio_sabado', models.TimeField(blank=True, null=True)),
                ('hora_fin_sabado', models.TimeField(blank=True, null=True)),
                ('horas_sabado', models.DecimalField(decimal_places=2, default=Decimal('8.00'), max_digits=4)),
                ('hora_inicio_domingo', models.TimeField(blank=True, null=True)),
                ('hora_fin_domingo', models.TimeField(blank=True, null=True)),
                ('horas_domingo', models.DecimalField(decimal_places=2, default=Decimal('8.00'), max_digits=4)),
                ('hora_inicio_lunes', models.TimeField(blank=True, null=True)),
                ('hora_fin_lunes', models.TimeField(blank=True, null=True)),
                ('horas_lunes', models.DecimalField(decimal_places=2, default=Decimal('8.00'), max_digits=4)),
                ('es_nocturno', models.BooleanField(default=False, help_text='Turno que incluye horario nocturno (10 PM - 6 AM)')),
                ('activo', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Tipo de Turno',
                'verbose_name_plural': 'Tipos de Turno',
                'ordering': ['nombre'],
            },
        ),
        migrations.CreateModel(
            name='DiaFestivo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100)),
                ('fecha', models.DateField(help_text='Fecha del festivo para el año en curso')),
                ('tipo', models.CharField(choices=[('fijo', 'Fecha Fija'), ('lunes_siguiente', 'Lunes Siguiente'), ('religioso', 'Religioso Variable'), ('puente', 'Puente Festivo')], default='fijo', max_length=15)),
                ('es_nacional', models.BooleanField(default=True)),
                ('activo', models.BooleanField(default=True)),
                ('observaciones', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Día Festivo',
                'verbose_name_plural': 'Días Festivos',
                'ordering': ['fecha'],
                'unique_together': {('fecha', 'nombre')},
            },
        ),
        migrations.CreateModel(
            name='Empleado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_empleado', models.CharField(max_length=20, unique=True)),
                ('nombres', models.CharField(max_length=100)),
                ('apellidos', models.CharField(max_length=100)),
                ('cedula', models.CharField(max_length=20, unique=True)),
                ('cargo', models.CharField(choices=[('operador_junior', 'Operador Centro de Cómputo Junior'), ('operador_senior', 'Operador Centro de Cómputo Senior'), ('coordinador', 'Coordinador de Turno'), ('supervisor', 'Supervisor Centro de Cómputo')], default='operador_junior', max_length=20)),
                ('salario_base', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('fecha_ingreso', models.DateField()),
                ('estado', models.CharField(choices=[('activo', 'Activo'), ('inactivo', 'Inactivo'), ('vacaciones', 'En Vacaciones'), ('incapacidad', 'En Incapacidad')], default='activo', max_length=15)),
                ('telefono', models.CharField(blank=True, max_length=20)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('direccion', models.TextField(blank=True)),
                ('valor_hora', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('horas_mensuales', models.IntegerField(default=220, help_text='Divisor mensual según Ley 2101/2021: 220 horas (44h/semana desde 15 jul 2025)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(300)])),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Empleado',
                'verbose_name_plural': 'Empleados',
                'ordering': ['apellidos', 'nombres'],
            },
        ),
        migrations.CreateModel(
            name='RegistroTurno',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fecha', models.DateField()),
                ('hora_inicio_real', models.TimeField(blank=True, null=True)),
                ('hora_fin_real', models.TimeField(blank=True, null=True)),
                ('horas_programadas', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('horas_trabajadas', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('estado', models.CharField(choices=[('programado', 'Programado'), ('trabajado', 'Trabajado'), ('ausente', 'Ausente'), ('reemplazado', 'Reemplazado'), ('extra', 'Turno Extra')], default='programado', max_length=15)),
                ('es_lunes', models.BooleanField(default=False)),
                ('es_martes', models.BooleanField(default=False)),
                ('es_miercoles', models.BooleanField(default=False)),
                ('es_jueves', models.BooleanField(default=False)),
                ('es_viernes', models.BooleanField(default=False)),
                ('es_sabado', models.BooleanField(default=False)),
                ('es_domingo', models.BooleanField(default=False)),
                ('es_festivo', models.BooleanField(default=False)),
                ('incluye_nocturno', models.BooleanField(default=False)),
                ('horas_extras', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('observaciones', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('empleado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='turnos', to='horas_extras.empleado')),
                ('tipo_turno', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='horas_extras.tipoturno')),
            ],
            options={
                'verbose_name': 'Registro de Turno',
                'verbose_name_plural': 'Registros de Turno',
                'ordering': ['-fecha', 'empleado'],
                'unique_together': {('empleado', 'fecha', 'tipo_turno')},
            },
        ),
        migrations.CreateModel(
            name='CalculoRecargo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('valor_hora_base', models.DecimalField(decimal_places=2, max_digits=10)),
                ('horas_ordinarias', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('horas_recargo_nocturno', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('valor_recargo_nocturno', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('horas_recargo_dominical', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('valor_recargo_dominical', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('horas_recargo_festivo', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('valor_recargo_festivo', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('horas_recargo_nocturno_festivo', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('valor_recargo_nocturno_festivo', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('horas_extras_diurnas_ordinarias', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('valor_horas_extras_diurnas_ordinarias', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('horas_extras_nocturnas_ordinarias', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('valor_horas_extras_nocturnas_ordinarias', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('horas_extras_diurnas_festivas', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('valor_horas_extras_diurnas_festivas', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('horas_extras_nocturnas_festivas', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4)),
                ('valor_horas_extras_nocturnas_festivas', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('total_ordinario', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_recargos', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_horas_extras', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_a_pagar', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('fecha_calculo', models.DateTimeField(auto_now_add=True)),
                ('registro_turno', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='calculo', to='horas_extras.registroturno')),
            ],
            options={
                'verbose_name': 'Cálculo de Recargo',
                'verbose_name_plural': 'Cálculos de Recargos',
                'ordering': ['-fecha_calculo'],
            },
        ),
        migrations.CreateModel(
            name='ResumenMensual',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('mes', models.IntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)])),
                ('ano', models.IntegerField(validators=[django.core.validators.MinValueValidator(2020)])),
                ('total_horas_trabajadas', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('total_horas_ordinarias', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('total_horas_extras', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('total_turnos', models.IntegerField(default=0)),
                ('horas_lunes', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('horas_martes', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('horas_miercoles', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('horas_jueves', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('horas_viernes', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('horas_sabados', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('horas_domingos', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('horas_festivos', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('total_recargos_nocturnos', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_recargos_dominicales', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_recargos_festivos', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_recargos_nocturno_festivo', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_valor_ordinario', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_valor_recargos', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_valor_horas_extras', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_a_pagar', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('fecha_generacion', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
                ('empleado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='resumenes', to='horas_extras.empleado')),
            ],
            options={
                'verbose_name': 'Resumen Mensual',
                'verbose_name_plural': 'Resúmenes Mensuales',
                'ordering': ['-ano', '-mes', 'empleado'],
                'unique_together': {('empleado', 'mes', 'ano')},
            },
        ),
    ]
